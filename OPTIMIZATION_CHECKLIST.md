# 项目优化建议清单

本清单旨在为项目的性能优化、界面美观和移动端适配提供具体建议。

---

### **1. 性能优化 (Performance)**

性能是留住用户的关键，特别是对于包含大量数据和图片的应用。

- **数据加载与处理:**
    - **处理 `public/song_data_raw.json`：**
        - **[关键] API化/预处理：** 目前这个 JSON 文件放在 `public` 目录下，意味着首次加载时，客户端需要下载整个（可能很大的）JSON 文件，然后解析它。这会阻塞主线程，导致页面长时间白屏。
            - **最佳实践：** 将这个 JSON 的处理逻辑放到后端，通过 API 按需（分页）提供数据。例如 `api/songs?page=1&limit=50`。
            - **次优方案：** 如果必须在前端处理，可以在构建（build）时运行一个脚本（例如 `script.js`），将这个大的 JSON 文件拆分成多个小文件（例如按字母、按分类），然后客户端按需加载。
        - **使用 Web Worker：** 如果数据必须在前端处理，可以将 JSON 的下载和 `JSON.parse()` 过程放到一个 Web Worker 中进行，避免阻塞 UI 渲染。
    - **图片资源加载：**
        - **懒加载 (Lazy Loading)：** 确保 `InfiniteScrollArea.vue` 或歌曲列表中的封面图片是懒加载的。只有当图片滚动到视口内时才开始加载。可以使用原生 `<img loading="lazy">` 属性，或者使用 `Intersection Observer API` 来实现。
        - **优化图片尺寸：** 列表中的封面图通常是缩略图。如果原始图片很大，会浪费带宽并减慢加载速度。建议使用工具（或在构建时）为列表生成特定尺寸的缩略图，而不是直接使用原始大图。
        - **使用占位符：** 在图片加载完成前，显示一个低质量的图像占位符（LQIP）或骨架屏（Skeleton），可以提升感知性能并防止页面布局抖动。`Loading.vue` 和 `shadcn` 的 `Skeleton` 组件可以用于此目的。

- **代码与渲染:**
    - **虚拟滚动 (Virtual Scrolling)：** 项目中有名为 `InfiniteScrollArea.vue` 和 `shims-vue-virtual-scroller.d.ts` 的文件，这表明您可能正在使用或考虑使用虚拟滚动。这是处理长列表的**最佳方案**。请确保它已正确实现，只渲染视口内可见的列表项，而不是成千上万个 DOM 元素。
    - **代码分割 (Code Splitting)：**
        - **路由懒加载：** 在 `src/routers/index.ts` 中，确保每个路由/视图（`Collection.vue`, `Settings.vue` 等）都是通过动态导入 `() => import('../views/MyView.vue')` 的方式懒加载的。这可以减小初始加载的 JavaScript 包体积。
        - **组件动态加载：** 对于不立即需要的大型组件（例如复杂的弹窗、不常用的面板），也可以使用 `defineAsyncComponent` 进行异步加载。
    - **包体积分析：** 使用 `rollup-plugin-visualizer` 这类 Vite 插件来分析最终构建产物的体积，看看哪些依赖项占用了过多空间，并考虑是否有更轻量的替代品。

### **2. 界面美观 (UI/Aesthetics)**

项目使用了 `shadcn` 和 `Tailwind CSS`，这为打造美观界面提供了很好的基础。

- **设计系统一致性：**
    - **统一组件风格：** 确保所有可交互元素（按钮、输入框、下拉菜单、卡片等）都统一使用或遵循 `shadcn` 组件的风格。避免混用原生或其他风格的组件，保持视觉一致性。
    - **统一间距和排版：** 充分利用 `Tailwind CSS` 的配置，定义统一的间距（spacing）、字号（font sizes）、颜色（colors），形成统一的设计语言。
- **提升视觉层次感：**
    - **信息优先级：** 在 `SongInfo.vue` 和 `ScoreCard.vue` 中，通过字重 (font-weight)、字号和颜色来区分信息的主次。例如，歌曲名应该比歌手名更突出。
    - **善用留白：** 增加组件之间和元素之间的留白（padding/margin），让界面看起来更清爽、不拥挤。
- **增加动态效果与反馈：**
    - **过渡与动画：** 为元素的出现、消失、状态变化（如 hover、active）添加平滑的过渡效果。可以使用 Vue 的 `<Transition>` 和 `<TransitionGroup>` 组件，或 `Tailwind` 的 `transition` 工具类。
    - **加载状态：** 优化 `Loading.vue` 组件，可以考虑使用 `shadcn` 提供的 `Skeleton` 组件来创建骨架屏，使用户在等待时对即将加载的内容有大致的预期。
    - **空状态 (Empty State)：** 当搜索结果为空，或一个收藏集里没有歌曲时，提供一个友好、美观的空状态提示（例如一个图标+一段文字），而不是一片空白。
- **主题化：**
    - **深色模式 (Dark Mode)：** `Tailwind CSS` 和 `shadcn` 对深色模式有非常好的支持。添加一个切换按钮，让用户可以选择浅色或深色主题，这是现代应用的标配。

### **3. 移动端适配 (Mobile-First/Responsive Design)**

- **响应式布局：**
    - **使用断点：** 充分利用 `Tailwind` 的响应式前缀（如 `sm:`, `md:`, `lg:`）。例如，歌曲列表在桌面端可以是多列网格布局（`grid-cols-5`），在平板上是三列（`md:grid-cols-3`），在手机上是单列或两列（`sm:grid-cols-2`）。
    - **侧边栏适配：** `AppSidebar.vue` 在桌面端可以固定显示，但在移动端应该默认隐藏，通过一个汉堡按钮来触发显示（抽屉式导航）。
    - **字体大小：** 确保在小屏幕上文本的可读性，不要让字体过小。
- **触摸优化：**
    - **触摸目标大小：** 确保所有按钮、链接和可点击元素的尺寸足够大，易于在触摸屏上准确点击（建议不小于 44x44px）。
    - **原生手势：** 在移动端，用户习惯于滑动等手势。可以考虑为某些操作（如删除）添加滑动操作。
- **输入体验：**
    - **优化表单：** `SongSearch.vue` 和 `TagInputCombobox.vue` 在移动端激活时，应确保弹出的虚拟键盘不会遮挡住输入框或关键结果区域。
- **测试：**
    - **浏览器开发者工具：** 频繁使用浏览器的设备模拟器来测试应用在不同尺寸（iPhone, iPad, Android等）下的表现。
